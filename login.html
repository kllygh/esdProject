<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--    Favicons-->
        <!-- ===============================================-->
        <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/favicon-16x16.png">
        <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicons/favicon.ico">

        <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"
            crossorigin="anonymous">
        <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
        <link href="vendor/fontawesome/css/all.css" rel="stylesheet">
        <link href="assets/css/login.css" rel="stylesheet">


        <title>Mystery Food Box </title>
    </head>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

    <body class="bg-default">
        <div class="main-content">
            <!-- Header -->
            <div class="header bg-gradient-primary py-7 py-lg-8">
            <div class="container">
                <div class="header-body text-center mb-7">
                <div class="row justify-content-center">
                    <div class="col-lg-5 col-md-6">
                    <h1 class="text-white">Mystery Food Box</h1>
                    
                    </div>
                </div>
                </div>
            </div>
            <div class="separator separator-bottom separator-skew zindex-100">
                <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <polygon class="fill-default" points="2560 0 2560 100 0 100"></polygon>
                </svg>
            </div>
            </div>
            <!-- Page content -->
            <div class="container mt--8 pb-5">
            <div class="row justify-content-center">
                <div class="col-lg-5 col-md-7">
                    <div class="card bg-secondary shadow border-0">
                        <div class="card-header bg-transparent pb-5">
                            <div class="text-muted text-center mt-2 mb-3"><small>Select Account Type</small></div>
                            <div class="btn-wrapper text-center">
                                <a href="#" class="btn btn-neutral btn-icon">
                                <span class="btn-inner--icon"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQIBRy4XVdyGLUPL1EQp9UAfZAYEn_7FCBONA&usqp=CAU"></span>
                                <span class="btn-inner--text">Restaurant</span>
                                </a>
                                <a href="#" class="btn btn-neutral btn-icon">
                                <span class="btn-inner--icon"><img src="https://thumbs.dreamstime.com/b/customer-icon-188113403.jpg"></span>
                                <span class="btn-inner--text">Customer</span>
                                </a>
                            </div>
                        </div>

                        <div class="row text-center my-4 border bg-light">
                            <button type="submit" class="btn my-2 col-12 px-4 btn-neutral" id="submit" style="background-color: white;border-color: white;">
                                <img src="google-icon.png" alt="Google icon" width="40" 
                                height="40"/> &nbsp;Sign in with Google
                            </button>
                        </div>

                        <div class="text-center text-muted mb-4">
                            <small>Or sign in with credentials</small>
                        </div>
                        <form role="form" class="px-3">
                            <div class="form-group mb-3">
                            <div class="input-group input-group-alternative">
                                <div class="input-group-prepend">
                                <span class="input-group-text"><i class="ni ni-email-83"></i></span>
                                </div>
                                <input id="email" class="form-control" placeholder="Email" type="text">
                            </div>
                            </div>
                            <div class="form-group">
                            <div class="input-group input-group-alternative">
                                <div class="input-group-prepend">
                                <span class="input-group-text"><i class="ni ni-lock-circle-open"></i></span>
                                </div>
                                <input id="password" class="form-control" placeholder="Password" type="password">
                            </div>
                            </div>
                            <div class="custom-control custom-control-alternative custom-checkbox">
                            <input class="custom-control-input" id=" customCheckLogin" type="checkbox">
                            <label class="custom-control-label" for=" customCheckLogin">
                                <span class="text-muted">Remember me</span>
                            </label>
                            </div>
                            <div class="text-center">
                            <a href="index.html" type="button" class="btn btn-primary my-4" id="signin">Sign in</a>
                            </div>
                        </form>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-4">
                        <a href="#" class="text-dark"><small>Forgot password?</small></a>
                    </div>
                    <div class="col-4 text-right">
                        <a href="#" class="text-dark"><small>Create new account</small></a>
                    </div>
                </div>
            </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="py-2">
            <div class="container">
            <div class="row align-items-center justify-content-xl-between">
                <div class="col-xl-6">
                <div class="copyright text-center text-xl-left text-muted">
                    <p class="font-weight-bold ml-1 text-white" target="_blank">BY ESD TEAM 3</p>
                </div>
                </div>
            </div>
            </div>
        </footer>

        <!-- Connection to Firebase -->
        <script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore-compat.js"></script>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import {initializeApp} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
            import {
                getAuth,
                signInWithPopup,
                GoogleAuthProvider,
                signOut,
            } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js";
            // import {getDatabase, set, ref, update} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
        
        
            // TODO: Add SDKs for Firebase products that we want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
        
            // Your web app's Firebase configuration
            const firebaseConfig = {
                // Your configs
                    apiKey: "AIzaSyCLWmg-X8gl75JxCVz57jOIekeqSUk6XUY",
                    authDomain: "adventuretime-934a2.firebaseapp.com",
                    projectId: "adventuretime-934a2",
                    storageBucket: "adventuretime-934a2.appspot.com",
                    messagingSenderId: "168230082500",
                    appId: "1:168230082500:web:6fbd2239d875c99c467691",
                    measurementId: "G-MXMNLZZLM8",
                    databaseURL: "https://adventuretime-934a2-default-rtdb.asia-southeast1.firebasedatabase.app/",
            };
        
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth();
            // const database = getDatabase(app);
            const provider = new GoogleAuthProvider();
            
            // SIGN IN WITH GOOGLE
            submit.addEventListener('click', (e) => {
                signInWithPopup(auth, provider)
                .then((result) => {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    const credential = GoogleAuthProvider.credentialFromResult(result);
                    const token = credential.accessToken;
                    // The signed-in user info.
                    const user = result.user;
                    localStorage.setItem('uid', user.uid)
                    window.location.href = 'index.html';
                }).catch((error) => {
                    // Handle Errors here.
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // The email of the user's account used.
                    const email = error.customData.email;
                    // The AuthCredential type that was used.
                    const credential = GoogleAuthProvider.credentialFromError(error);
                    
                    console.log(errorMessage)
                });
            })
            
            // localStorage.setItem('uid', user.uid)
        </script>
    </body>

</html>